<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Photo Albums</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    
    body {
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1, h2, h3 {
      color: #004d00;
    }
    
    /* Album styles */
    .albums-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .album-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .album-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .album-thumbnail {
      height: 150px;
      background-color: #eee;
      background-size: cover;
      background-position: center;
    }
    
    .album-info {
      padding: 15px;
    }
    
    .album-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .album-count {
      font-size: 0.9em;
      color: #666;
    }
    
    /* Gallery styles */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .gallery-item {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .gallery-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .gallery-img:hover {
      transform: scale(1.05);
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0,0,0,0.7);
      z-index: 100;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .modal-title {
      margin: 0;
      font-size: 1.5em;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .form-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }
    
    /* Buttons */
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background-color: #004d00;
      color: white;
      font-weight: bold;
    }
    
    .btn:hover {
      background-color: #006600;
    }
    
    /* Utility classes */
    .mt-20 {
      margin-top: 20px;
    }
    
    .text-center {
      text-align: center;
    }
    
    /* Messages */
    .message {
      padding: 10px 15px;
      border-radius: 4px;
      margin-bottom: 20px;
    }
    
    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .info {
      background-color: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Photo Albums</h1>
    
    <div id="message-container"></div>
    
    <div class="actions">
      <button id="create-album-button" class="btn">Create New Album</button>
    </div>
    
    <h2>Albums</h2>
    <div id="albums-container" class="albums-grid">
      <!-- Albums will be loaded here -->
    </div>
    
    <h2 id="current-gallery-title">All Photos</h2>
    <div id="gallery-container" class="gallery">
      <!-- Photos will be loaded here -->
    </div>
  </div>
  
  <!-- Create Album Modal -->
  <div id="create-album-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Create New Album</h3>
        <button class="modal-close">&times;</button>
      </div>
      
      <div class="form-group">
        <label for="album-name">Album Name</label>
        <input type="text" id="album-name" placeholder="Enter album name">
      </div>
      
      <div class="form-group">
        <label for="album-description">Description (optional)</label>
        <textarea id="album-description" placeholder="Enter a description"></textarea>
      </div>
      
      <div class="form-buttons">
        <button id="cancel-album" class="btn">Cancel</button>
        <button id="create-album" class="btn">Create Album</button>
      </div>
    </div>
  </div>
  
  <script>
    // DOM Elements
    const albumsContainer = document.getElementById('albums-container');
    const galleryContainer = document.getElementById('gallery-container');
    const galleryTitle = document.getElementById('current-gallery-title');
    const messageContainer = document.getElementById('message-container');
    const createAlbumButton = document.getElementById('create-album-button');
    const modal = document.getElementById('create-album-modal');
    const modalClose = modal.querySelector('.modal-close');
    const cancelAlbum = document.getElementById('cancel-album');
    const createAlbum = document.getElementById('create-album');
    const albumNameInput = document.getElementById('album-name');
    const albumDescInput = document.getElementById('album-description');
    
    // Default Albums
    const DEFAULT_ALBUMS = [
      { id: 'all', title: 'All Photos', description: 'All photos in the gallery', count: 0 },
      { id: 'events', title: 'Golf Events', description: 'Photos from golf events', count: 0 },
      { id: 'tournaments', title: 'Tournaments', description: 'Tournament photos', count: 0 }
    ];
    
    // Default Images (in case API doesn't work)
    const DEFAULT_IMAGES = [
      { id: 'img1', src: 'images/photo1.jpg', alt: 'Photo 1', albumId: 'events' },
      { id: 'img2', src: 'images/photo2.jpg', alt: 'Photo 2', albumId: 'tournaments' },
      { id: 'img3', src: 'images/photo3.jpg', alt: 'Photo 3', albumId: 'events' },
      { id: 'img4', src: 'images/photo4.jpg', alt: 'Photo 4', albumId: 'all' }
    ];
    
    // Constants
    const ALBUMS_STORAGE_KEY = 'photo_albums';
    const PHOTOS_STORAGE_KEY = 'photo_albums_photos';
    let currentAlbumId = 'all';
    
    // Initialize
    initializeAlbums();
    loadAlbums();
    loadPhotos();
    
    // Event Listeners
    createAlbumButton.onclick = function() {
      openModal();
    };
    
    modalClose.onclick = function() {
      closeModal();
    };
    
    cancelAlbum.onclick = function() {
      closeModal();
    };
    
    createAlbum.onclick = function() {
      createNewAlbum();
    };
    
    // Close modal when clicking outside
    window.onclick = function(event) {
      if (event.target === modal) {
        closeModal();
      }
    };
    
    // Functions
    function openModal() {
      modal.style.display = 'flex';
      albumNameInput.focus();
    }
    
    function closeModal() {
      modal.style.display = 'none';
      albumNameInput.value = '';
      albumDescInput.value = '';
    }
    
    function showMessage(message, type) {
      messageContainer.innerHTML = `<div class="message ${type}">${message}</div>`;
      
      // Clear message after 3 seconds
      setTimeout(() => {
        messageContainer.innerHTML = '';
      }, 3000);
    }
    
    function initializeAlbums() {
      // Check if albums exist in storage
      const albums = getAlbums();
      
      if (albums.length === 0) {
        // Initialize with defaults
        saveAlbums(DEFAULT_ALBUMS);
      }
    }
    
    function getAlbums() {
      try {
        const albums = localStorage.getItem(ALBUMS_STORAGE_KEY);
        return albums ? JSON.parse(albums) : [];
      } catch (error) {
        console.error('Error getting albums:', error);
        return [];
      }
    }
    
    function saveAlbums(albums) {
      try {
        localStorage.setItem(ALBUMS_STORAGE_KEY, JSON.stringify(albums));
      } catch (error) {
        console.error('Error saving albums:', error);
      }
    }
    
    function getPhotos() {
      try {
        const photos = localStorage.getItem(PHOTOS_STORAGE_KEY);
        return photos ? JSON.parse(photos) : DEFAULT_IMAGES;
      } catch (error) {
        console.error('Error getting photos:', error);
        return DEFAULT_IMAGES;
      }
    }
    
    function savePhotos(photos) {
      try {
        localStorage.setItem(PHOTOS_STORAGE_KEY, JSON.stringify(photos));
      } catch (error) {
        console.error('Error saving photos:', error);
      }
    }
    
    function loadAlbums() {
      const albums = getAlbums();
      albumsContainer.innerHTML = '';
      
      albums.forEach(album => {
        // Get photo count for this album
        const photos = getPhotos();
        let count = 0;
        
        if (album.id === 'all') {
          count = photos.length;
        } else {
          count = photos.filter(photo => photo.albumId === album.id).length;
        }
        
        // Update count
        album.count = count;
        
        // Create album card
        const albumCard = document.createElement('div');
        albumCard.className = 'album-card';
        
        // Add active state if this is the current album
        if (album.id === currentAlbumId) {
          albumCard.style.borderLeft = '4px solid #004d00';
        }
        
        const thumbnail = document.createElement('div');
        thumbnail.className = 'album-thumbnail';
        
        // Try to get first image from album as thumbnail
        if (album.id === 'all' && photos.length > 0) {
          thumbnail.style.backgroundImage = `url('${photos[0].src}')`;
        } else {
          const albumPhotos = photos.filter(photo => photo.albumId === album.id);
          if (albumPhotos.length > 0) {
            thumbnail.style.backgroundImage = `url('${albumPhotos[0].src}')`;
          } else {
            // Default thumbnail
            thumbnail.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
          }
        }
        
        const info = document.createElement('div');
        info.className = 'album-info';
        
        const title = document.createElement('div');
        title.className = 'album-title';
        title.textContent = album.title;
        
        const countElement = document.createElement('div');
        countElement.className = 'album-count';
        countElement.textContent = `${count} photos`;
        
        info.appendChild(title);
        info.appendChild(countElement);
        
        albumCard.appendChild(thumbnail);
        albumCard.appendChild(info);
        
        // Add click handler
        albumCard.onclick = function() {
          currentAlbumId = album.id;
          galleryTitle.textContent = album.title;
          loadPhotos();
          
          // Update active state
          document.querySelectorAll('.album-card').forEach(card => {
            card.style.borderLeft = card === albumCard ? '4px solid #004d00' : 'none';
          });
          
          showMessage(`Viewing album: ${album.title}`, 'info');
        };
        
        albumsContainer.appendChild(albumCard);
      });
    }
    
    function loadPhotos() {
      const photos = getPhotos();
      galleryContainer.innerHTML = '';
      
      // Filter photos by current album
      const filteredPhotos = currentAlbumId === 'all' 
        ? photos 
        : photos.filter(photo => photo.albumId === currentAlbumId);
      
      if (filteredPhotos.length === 0) {
        galleryContainer.innerHTML = '<p class="text-center">No photos in this album yet.</p>';
        return;
      }
      
      filteredPhotos.forEach(photo => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        
        const img = document.createElement('img');
        img.src = photo.src;
        img.alt = photo.alt;
        img.className = 'gallery-img';
        
        item.appendChild(img);
        galleryContainer.appendChild(item);
      });
    }
    
    function createNewAlbum() {
      const name = albumNameInput.value.trim();
      const description = albumDescInput.value.trim();
      
      if (!name) {
        showMessage('Please enter an album name', 'error');
        return;
      }
      
      // Create new album
      const newAlbum = {
        id: 'album_' + Date.now(),
        title: name,
        description: description || name,
        count: 0
      };
      
      // Save album
      const albums = getAlbums();
      albums.push(newAlbum);
      saveAlbums(albums);
      
      // Close modal
      closeModal();
      
      // Reload albums
      loadAlbums();
      
      showMessage('Album created successfully!', 'success');
    }
  </script>
</body>
</html>
