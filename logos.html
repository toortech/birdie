<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birdie Bush Bandits â€“ Logos</title>
  <meta name="description" content="Official logos and branding materials for the Birdie Bush Bandits golf group.">
  <link rel="icon" type="image/svg+xml" href="bbb-logo.svg">
  <!-- Add Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
  <!-- Global CSS -->
  <link rel="stylesheet" href="css/style.css">
  
  <!-- Core Modules -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/db.js"></script>
  <script src="js/ui.js"></script>
  
  <style>
    /* Simple logo gallery styles */
    .logo-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    .logo-item {
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      background-color: white;
    }
    
    .logo-img-container {
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0.75rem;
    }
    
    .logo-img {
      max-width: 100%;
      max-height: 100%;
    }
    
    .logo-name {
      font-size: 0.9rem;
      font-weight: bold;
      margin-bottom: 0;
    }
    
    /* Loading and error messages */
    .loading-message,
    .error-message {
      text-align: center;
      padding: 2rem;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin: 2rem 0;
    }
    
    .error-message {
      color: #721c24;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .logo-gallery {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      }
    }
    
    @media (max-width: 480px) {
      .logo-gallery {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      }
    }
  </style>
</head>
<body>
  <!-- Authentication Protection -->
  <script>
    // Check if BBB_AUTH is loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Wait for auth module to initialize
      setTimeout(function() {
        if (typeof BBB_AUTH !== 'undefined') {
          // If not authenticated and not on login page, redirect to login
          if (!BBB_AUTH.isAuthenticated && window.location.pathname.indexOf('login.html') === -1) {
            // Save the current URL to redirect back after login
            sessionStorage.setItem('redirectAfterLogin', window.location.pathname);
            window.location.href = 'login.html';
          }
        } else {
          console.error('BBB_AUTH module not found! Authentication check failed.');
        }
      }, 100); // Small delay to ensure modules are loaded
    });
  </script>
  
  <a href="#main" class="skip-link">Skip to main content</a>
  
  <main id="main"></main>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize modules
      BBB_AUTH.init({
        cloudflareEnabled: BBB_CONFIG.cloudflareEnabled
      });
      
      BBB_DB.init({
        useCloudflare: BBB_CONFIG.cloudflareEnabled,
        localStoragePrefix: 'bbb_'
      });
      
      // Create header
      const headerElements = BBB_UI.createHeader({
        fixed: true,
        showHomeLinkText: true
      });
      
      document.body.insertBefore(headerElements.header, document.body.firstChild);
      
      // Get main content element
      const main = document.getElementById('main');
      main.appendChild(headerElements.mainWrapper);
      
      // Create page content
      const mainContent = document.createElement('div');
      
      // Create page title
      const titleContainer = BBB_UI.createPageTitle({
        title: 'Birdie Bush Bandits',
        showFoundedText: true,
        showGolfballs: true
      });
      mainContent.appendChild(titleContainer);
      
      // Add page subtitle
      const subtitle = document.createElement('h2');
      subtitle.textContent = 'Club Logos';
      mainContent.appendChild(subtitle);
      
      // Create status message container
      const statusMessage = BBB_UI.createStatusMessage();
      mainContent.appendChild(statusMessage);
      
      // Add simple description
      const description = document.createElement('p');
      description.textContent = 'Here are the official Birdie Bush Bandits logos available for club use.';
      mainContent.appendChild(description);
      
      // Create logo gallery container
      const logoGallery = document.createElement('div');
      logoGallery.className = 'logo-gallery';
      logoGallery.id = 'logo-gallery';
      
      // Add loading message initially
      const loadingMessage = document.createElement('div');
      loadingMessage.className = 'loading-message';
      loadingMessage.id = 'loading-message';
      loadingMessage.textContent = 'Loading logos...';
      mainContent.appendChild(loadingMessage);
      
      // Add gallery after loading
      mainContent.appendChild(logoGallery);
      
      // Function to load all logos from the logos directory
      async function loadLogos() {
        try {
          // Fetch the list of files in the logos directory
          // This would typically be done through a server-side API
          // For static sites, we'll use a workaround by trying to load image files
          
          // List of common image extensions to try
          const extensions = ['svg', 'png', 'jpg', 'jpeg', 'gif'];
          
          // Initialize the gallery
          logoGallery.innerHTML = '';
          let foundLogos = false;
          
          // Create a set of filenames to avoid duplicates
          const processedFiles = new Set();
          
          // Try to load each logo with predefined names and extensions
          const filenamesToTry = [
            'bbb-logo',
            'bbb-logo-white',
            'bbb-round-logo',
            'bbb-square-logo',
            'bbb-text-logo',
            'bbb-badge',
            'bbb-icon',
            'bbb-wordmark',
            'logo',
            'logo-white',
            'logo-color',
            'bbandits-logo',
            'birdiebush-logo',
            'banner',
            'badge',
            'icon'
          ];
          
          // First try the direct logos directory
          for (const baseName of filenamesToTry) {
            for (const ext of extensions) {
              // Generate both path variations (with and without logos directory)
              const pathsToTry = [
                `logos/${baseName}.${ext}`,  // Try with logos directory
                `${baseName}.${ext}`         // Try in root directory as fallback
              ];
              
              for (const path of pathsToTry) {
                // Skip if we've already processed this file
                if (processedFiles.has(path)) continue;
                
                // Try to load the image
                const img = new Image();
                img.src = path;
                
                // Use a promise to wait for load or error
                await new Promise(resolve => {
                  img.onload = function() {
                    // Image loaded successfully, add to gallery
                    addLogoToGallery(path, baseName);
                    foundLogos = true;
                    processedFiles.add(path);
                    resolve();
                  };
                  
                  img.onerror = function() {
                    // Image failed to load, just resolve
                    resolve();
                  };
                });
              }
            }
          }
          
          // Check if we found any logos
          if (!foundLogos) {
            // No logos found, show message
            const noLogosMessage = document.createElement('div');
            noLogosMessage.className = 'error-message';
            noLogosMessage.textContent = 'No logo files found. Please upload some logo files to the "logos" directory.';
            logoGallery.appendChild(noLogosMessage);
          }
          
          // Hide loading message
          document.getElementById('loading-message').style.display = 'none';
        } catch (error) {
          console.error('Error loading logos:', error);
          
          // Show error message
          document.getElementById('loading-message').textContent = 'Error loading logos. Please try again later.';
          document.getElementById('loading-message').className = 'error-message';
        }
      }
      
      // Function to add a logo to the gallery
      function addLogoToGallery(path, baseName) {
        const logoItem = document.createElement('div');
        logoItem.className = 'logo-item';
        
        const logoImgContainer = document.createElement('div');
        logoImgContainer.className = 'logo-img-container';
        
        const logoImg = document.createElement('img');
        logoImg.className = 'logo-img';
        logoImg.src = path;
        logoImg.alt = formatLogoName(path);
        
        logoImgContainer.appendChild(logoImg);
        
        const logoName = document.createElement('p');
        logoName.className = 'logo-name';
        logoName.textContent = formatLogoName(path);
        
        logoItem.appendChild(logoImgContainer);
        logoItem.appendChild(logoName);
        logoGallery.appendChild(logoItem);
      }
      
      // Function to format logo name from filename
      function formatLogoName(filename) {
        // Extract just the filename without path or extension
        const baseName = filename.split('/').pop().split('.')[0];
        
        // Replace hyphens and underscores with spaces
        const nameWithSpaces = baseName.replace(/[-_]/g, ' ');
        
        // Capitalize first letter of each word
        return nameWithSpaces
          .split(' ')
          .map(word => word.charAt(0).toUpperCase() + word.slice(1))
          .join(' ');
      }
      
      // Add usage guidelines section
      const guidelinesSection = document.createElement('div');
      guidelinesSection.className = 'section-card';
      guidelinesSection.style.marginTop = '2rem';
      guidelinesSection.style.padding = '1.5rem';
      guidelinesSection.style.backgroundColor = 'white';
      guidelinesSection.style.borderRadius = '8px';
      guidelinesSection.style.boxShadow = 'var(--shadow-md)';
      
      const guidelinesTitle = document.createElement('h3');
      guidelinesTitle.textContent = 'Logo Usage Guidelines';
      guidelinesTitle.style.marginTop = '0';
      guidelinesTitle.style.marginBottom = '1rem';
      
      const guidelinesList = document.createElement('ul');
      guidelinesList.style.paddingLeft = '1.5rem';
      
      const guidelines = [
        'Maintain clear space around the logo equal to the height of the letter "B" in the logo.',
        'Do not modify, distort, or alter the colors of the logo.',
        'For best visibility, use the white version of the logo on dark backgrounds.',
        'Minimum recommended size is 1 inch or 72 pixels for digital use.',
        'The SVG format is preferred for all digital applications to maintain clarity at any size.'
      ];
      
      guidelines.forEach(guideline => {
        const item = document.createElement('li');
        item.textContent = guideline;
        item.style.marginBottom = '0.5rem';
        guidelinesList.appendChild(item);
      });
      
      guidelinesSection.appendChild(guidelinesTitle);
      guidelinesSection.appendChild(guidelinesList);
      
      // Add contact info
      const contactInfo = document.createElement('p');
      contactInfo.style.marginTop = '1.5rem';
      contactInfo.style.fontSize = '0.9rem';
      contactInfo.style.fontStyle = 'italic';
      contactInfo.textContent = 'For questions about logo usage or to request additional formats, please contact the BBB administrator.';
      
      guidelinesSection.appendChild(contactInfo);
      mainContent.appendChild(guidelinesSection);
      
      // Add content to main wrapper
      headerElements.mainWrapper.appendChild(mainContent);
      
      // Load logos
      loadLogos();
    });
  </script>
</body>
</html>
