<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birdie Bush Bandits ‚Äì Saved Scorecards</title>
  <style>
    body {
      background-color: #f5f5f5;
      font-family: sans-serif;
      text-align: center;
      padding: 2rem;
      margin: 0 auto;
      color: #000;
      max-width: 1200px;
    }
    header {
      text-align: left;
      margin-bottom: 1rem;
    }
    .home-link {
      color: #000;
      font-weight: bold;
      text-decoration: none;
    }
    h1 {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      color: #003300;
      font-weight: bold;
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
    }
    h1 img {
      width: 50px;
      height: auto;
      margin: 0 10px;
    }
    h2 {
      color: #003300;
      font-weight: bold;
      margin: 1rem 0;
    }
    .founded {
      font-size: 1rem;
      margin-top: 0.25rem;
      margin-bottom: 1.5rem;
      font-style: italic;
      color: #333;
    }
    .message {
      background: #e3f2fd;
      padding: 1rem;
      border-radius: 4px;
      margin: 1rem 0;
      color: #0d47a1;
    }
    .scorecard-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2rem;
    }
    .scorecard-card {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      text-align: left;
      position: relative;
    }
    .scorecard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .scorecard-title {
      font-weight: bold;
      color: #003300;
      font-size: 1.1rem;
    }
    .scorecard-date {
      color: #666;
      font-size: 0.9rem;
    }
    .scorecard-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 0.5rem;
    }
    .player-info {
      background: #f9f9f9;
      padding: 0.5rem;
      border-radius: 4px;
    }
    .player-name {
      font-weight: bold;
      color: #004c99;
    }
    .player-stats {
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }
    .delete-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .delete-btn:hover {
      background: #c82333;
    }
    .no-scorecards {
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      color: #666;
      font-style: italic;
    }
    .action-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }
    .action-btn {
      padding: 0.75rem 1.5rem;
      background: #004c99;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
      display: inline-block;
    }
    .action-btn:hover {
      background: #003d7a;
    }
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }
      .scorecard-details {
        grid-template-columns: 1fr;
      }
    }
    @media (max-width: 480px) {
      body {
        padding: 1rem;
      }
      h1 {
        font-size: 1.5rem;
      }
      .scorecard-card {
        padding: 0.75rem;
      }
      .delete-btn {
        position: static;
        margin-top: 0.5rem;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <nav><a href="index.html" class="home-link">üè† Home</a></nav>
  </header>
  
  <h1>
    <img src="golfball.png" alt="Golf ball icon">
    Birdie Bush Bandits
    <img src="golfball.png" alt="Golf ball icon">
  </h1>
  <div class="founded">Founded August 2020</div>
  
  <h2>Saved Scorecards</h2>
  
  <div class="message">
    Scorecards are automatically saved when you complete and save them in the <a href="scorecard.html">Scorecard Builder</a>.
  </div>
  
  <div id="scorecards-container"></div>
  
  <div class="action-buttons">
    <a href="scorecard.html" class="action-btn">Create New Scorecard</a>
  </div>

  <script>
    function loadScorecards() {
      const container = document.getElementById('scorecards-container');
      let scorecards;
      
      try {
        scorecards = JSON.parse(localStorage.getItem('golfScorecards') || '[]');
      } catch (e) {
        scorecards = [];
      }
      
      if (scorecards.length === 0) {
        container.innerHTML = '<div class="no-scorecards">No saved scorecards yet. Create your first scorecard!</div>';
        return;
      }
      
      container.innerHTML = '<div class="scorecard-list"></div>';
      const list = container.querySelector('.scorecard-list');
      
      // Sort by date, newest first
      scorecards.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      scorecards.forEach((scorecard, index) => {
        const card = createScorecardCard(scorecard, index);
        list.appendChild(card);
      });
    }
    
    function createScorecardCard(scorecard, index) {
      const card = document.createElement('div');
      card.className = 'scorecard-card';
      
      const date = new Date(scorecard.date);
      const formattedDate = date.toLocaleDateString('en-GB', { 
        day: 'numeric', 
        month: 'short', 
        year: 'numeric' 
      });
      
      // Create header
      const header = document.createElement('div');
      header.className = 'scorecard-header';
      
      const title = document.createElement('div');
      title.className = 'scorecard-title';
      title.textContent = `${scorecard.course} - ${scorecard.tee.charAt(0).toUpperCase() + scorecard.tee.slice(1)} Tees`;
      
      const dateEl = document.createElement('div');
      dateEl.className = 'scorecard-date';
      dateEl.textContent = `${formattedDate} (${scorecard.holes === '18' ? 'Full 18' : scorecard.holes === '9f' ? 'Front 9' : 'Back 9'})`;
      
      header.appendChild(title);
      header.appendChild(dateEl);
      
      // Create player details
      const details = document.createElement('div');
      details.className = 'scorecard-details';
      
      scorecard.players.forEach(player => {
        const playerInfo = document.createElement('div');
        playerInfo.className = 'player-info';
        
        const name = document.createElement('div');
        name.className = 'player-name';
        name.textContent = player.name;
        
        const stats = document.createElement('div');
        stats.className = 'player-stats';
        
        // Calculate Stableford points
        const points = calculateStablefordPoints(player, scorecard);
        
        stats.innerHTML = `
          Handicap: ${player.handicap} (CH: ${player.courseHandicap})<br>
          Strokes: ${player.totalShots}<br>
          Points: ${points}
        `;
        
        playerInfo.appendChild(name);
        playerInfo.appendChild(stats);
        details.appendChild(playerInfo);
      });
      
      // Create delete button
      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'delete-btn';
      deleteBtn.textContent = 'Delete';
      deleteBtn.addEventListener('click', () => {
        if (confirm('Are you sure you want to delete this scorecard?')) {
          deleteScorecard(index);
        }
      });
      
      card.appendChild(header);
      card.appendChild(details);
      card.appendChild(deleteBtn);
      
      return card;
    }
    
    function calculateStablefordPoints(player, scorecard) {
      // This is a simplified calculation
      // In the actual scorecard.html, the points are calculated hole by hole
      // Here we'll just show the saved total if available
      // You could enhance this to recalculate based on the saved scores array
      
      // If points were saved with the scorecard, use those
      if (player.totalPoints !== undefined) {
        return player.totalPoints;
      }
      
      // Otherwise, return a placeholder
      return 'N/A';
    }
    
    function deleteScorecard(index) {
      let scorecards = JSON.parse(localStorage.getItem('golfScorecards') || '[]');
      scorecards.splice(index, 1);
      localStorage.setItem('golfScorecards', JSON.stringify(scorecards));
      loadScorecards();
    }
    
    // Load scorecards on page load
    loadScorecards();
  </script>
</body>
</html>
